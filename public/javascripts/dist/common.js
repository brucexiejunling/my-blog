/*! blog 2014-08-28 */
function initLocationHash(){var a=location.hash;"#tech"===a||"#life"===a||"#trip"===a?switchPageTo(a.substring(1)):(location.hash="#tech",switchPageTo("tech"))}function listenHashChangeEvent(){$(window).on("hashchange",function(){var a=location.hash;("#tech"===a||"#trip"===a||"#life"===a)&&currentPage!==a.substring(1)&&switchPageTo(a.substring(1))})}function listenLogoutBtnClickEvent(){$("div.personal span.logout").click(function(){$.post("/logout",function(a){a.error||(location.href="/")})})}function switchPageTo(a){currentPage=a,$("div.slide-bar").animate({left:page[a]},400,function(){$("div.loading-index").show(),$.post("/load-page",{pageName:a},function(b){""===b.error&&($("div.loading-index").hide(),$("div.container").html(b.html),reset(),listenPageSwitchEvent(),"tech"===a&&(listenTagClickEvent(),window.rotate.start()))})})}function reset(){currentTitlePageIndex=1,currentArticlePageIndex=1,currentTag=""}function listenPageSwitchEvent(){listenTitlePageSwitchEvent(),listenArticlePageSwitchEvent()}function listenTitlePageSwitchEvent(){$("div.title-page-switch span.pre-page").click(switchToPreviousTitlePage),$("div.title-page-switch span.next-page").click(switchToNextTitlePage)}function listenArticlePageSwitchEvent(){$("div.article-page-switch span.pre-page").click(switchToPreviousArticlePage),$("div.article-page-switch span.next-page").click(switchToNextArticlePage)}function listenTagClickEvent(){$("div.tag-cloud a").click(function(a){var b=a||window.event;return loadTechArticleByTag($(this).html()),b.preventDefault?void b.preventDefault():!1})}function switchToPreviousTitlePage(){1!==currentTitlePageIndex?loadTitlePageByIndex(--currentTitlePageIndex):alert("page 1!")}function switchToNextTitlePage(){loadTitlePageByIndex(++currentTitlePageIndex)}function switchToPreviousArticlePage(){currentArticlePageIndex>1?loadArticlePageByIndex(--currentArticlePageIndex):alert("page 1!")}function switchToNextArticlePage(){loadArticlePageByIndex(++currentArticlePageIndex)}function loadTitlePageByIndex(a){var b="tech"===currentPage?currentTag:"",c={view:"title-list",type:currentPage,tag:b,page:a,limit:16};$("div.loading-title-list").show(),$.post("/load-articles",c,function(a){a.error||($("div.loading-title-list").hide(),$("div.title-page").html(a.html),listenTitlePageSwitchEvent())})}function loadArticlePageByIndex(a){var b="",c={view:"article-list",type:currentPage,tag:b,page:a,limit:5};$("div.loading-article-list").show(),$.post("/load-articles",c,function(a){a.error||($("div.loading-article-list").hide(),$("div.article-page").html(a.html),listenArticlePageSwitchEvent())})}function loadTechArticleByTag(a){currentTag=a;var b={view:"title-list",type:"tech",tag:a,page:1,limit:16};$("div.loading-title-list").show(),$.post("/load-articles",b,function(a){""===a.error&&($("div.loading-title-list").hide(),$("div.title-page").html(a.html),$("div.directory-info span.current-tag").html(currentTag),$("div.article-num span").html(a.total),currentTitlePageIndex=1,listenTitlePageSwitchEvent())})}var currentPage="",page={tech:"20%",life:"40%",trip:"60%"},currentArticlePageIndex=1,currentTitlePageIndex=1,currentTag="",pagesCache={tech:{},life:{},trip:{}};$(function(){initLocationHash(),listenHashChangeEvent(),listenLogoutBtnClickEvent()});